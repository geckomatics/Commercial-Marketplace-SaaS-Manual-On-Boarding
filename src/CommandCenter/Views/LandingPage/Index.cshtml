@using Microsoft.Marketplace.SaaS.Models
@using CommandCenter.Models
@model CommandCenter.Models.AzureSubscriptionProvisionModel

@{
    ViewData["Title"] = "Index";
}
<p class="h2 mb-4 text-center">
    Congratulations on your shiny new city insights.
    <br> 
    These are the details of your subscription
</p>


@if (Model == default)
{
<span class="text-danger">@ViewBag.message, please check logs.</span>
}
else
{
<hr />

<span class="text-danger">@Html.ValidationSummary(false)</span>

<form asp-controller="LandingPage" asp-action="Index">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="accordion" id="landingPageComponents">
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingOne">
                            Your contact information
                        </h2>
                        <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne">
                            <div class="accordion-body">
                                <div class="panel panel-default">
                                    <div class="row">
                                        <div class="col-6">
                                            <div class="card">
                                                <div class="card-title">
                                                    <p class="fw-bold">Main contact</p>
                                                </div>
                                                <div class="card-body">
                                                    <div class="row">
                                                        <div class="col-sm-6">
                                                            <label class="form-label">@Html.DisplayNameFor(model => model.EmailFromClaims):</label>

                                                        </div>
                                                        <div class="col-sm-6">
                                                            <label class="form-label">@Html.DisplayFor(model => model.EmailFromClaims) </label>
                                                            <input asp-for="EmailFromClaims" type="hidden" class="form-control" />
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-sm-6">
                                                            <label class="form-label">@Html.DisplayNameFor(model => model.NameFromOpenIdConnect):</label>

                                                        </div>
                                                        <div class="col-sm-6">
                                                            <label class="form-label">@Html.DisplayFor(model => model.NameFromOpenIdConnect) </label>
                                                            <input asp-for="NameFromOpenIdConnect" type="hidden" class="form-control" />
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingThree">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="true" aria-controls="collapseThree">
                                Microsoft subscription details
                            </button>
                        </h2>
                        <div id="collapseThree" class="accordion-collapse collapse show" aria-labelledby="headingThree">
                            <div class="accordion-body">
                                <div class="panel panel-default">

                                    <div class="row">
                                        <div class="col-sm-6">
                                            <label class="form-label">@Html.DisplayNameFor(model => model.OfferId):</label>
                                        </div>
                                        <div class="col-sm-6">
                                            <label class="form-label">@Html.DisplayFor(model => model.OfferId) </label>
                                            <input asp-for="OfferId" type="hidden" class="form-control" />
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-sm-6">
                                            <label class="form-label">@Html.DisplayNameFor(model => model.PlanId):</label>
                                        </div>
                                        <div class="col-sm-6">
                                            <label class="form-label">@Html.DisplayFor(model => model.PlanId) </label>
                                            <input asp-for="PlanId" type="hidden" class="form-control" />
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-sm-6">
                                            <label class="form-label">@Html.DisplayNameFor(model => model.PurchaserTenantId):</label>
                                        </div>
                                        <div class="col-sm-6">
                                            <label class="form-label">@Html.DisplayFor(model => model.PurchaserTenantId) </label>
                                            <input asp-for="PurchaserTenantId" type="hidden" class="form-control" />
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-sm-6">
                                            <label class="form-label">@Html.DisplayNameFor(model => model.BeneficiaryTenantId):</label>
                                        </div>
                                        <div class="col-sm-6">
                                            <label class="form-label">@Html.DisplayFor(model => model.BeneficiaryTenantId) </label>
                                            <input asp-for="BeneficiaryTenantId" type="hidden" class="form-control" />
                                        </div>
                                    </div>

                                    @if (Model.SubscriptionStatus == SubscriptionStatusEnum.Subscribed)
                                    {
                                    <div class="row">
                                        <div class="col-sm-6">
                                            @Html.DisplayNameFor(model => model.AvailablePlans)
                                        </div>

                                        <div class="col-sm-6">
                                            @Html.DropDownListFor(m => m.Region, new SelectList(Model.AvailablePlans, "PlanId", "DisplayName"), "Choose a new plan")
                                        </div>
                                    </div>
                                    }

                                    <div class="row">
                                        <div class="col-sm-6">
                                            <label class="form-label">@Html.DisplayNameFor(model => model.SubscriptionId):</label>
                                        </div>
                                        <div class="col-sm-6">
                                            <label class="form-label">@Html.DisplayFor(model => model.SubscriptionId) </label>
                                            <input asp-for="SubscriptionId" type="hidden" class="form-control" />
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-sm-6">
                                            @Html.DisplayNameFor(model => model.SubscriptionName)
                                        </div>
                                        <div class="col-sm-6">
                                            @Html.DisplayFor(model => model.SubscriptionName)
                                            <input asp-for="SubscriptionName" type="hidden" class="form-control" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    @* Just to carry over the subscription status, so we can determine if we are here for initial
        provisioning or configuration later in the life of the subscription*@
    <input asp-for="SubscriptionStatus" type="hidden" class="form-control" />

    <button type="submit" class="btn btn-primary btn-block m-3">Submit</button>

</form>
}

@section Scripts
{
    <script>

    </script>
}